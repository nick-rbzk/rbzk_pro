(()=>{"use strict";var t,e,i,n,a=function(t,e,i,n){return new(i||(i=Promise))(function(a,s){function r(t){try{l(n.next(t))}catch(e){s(e)}}function o(t){try{l(n.throw(t))}catch(e){s(e)}}var d=window.navigator.userAgent;function l(t){var e;t.done?a(t.value):((e=t.value)instanceof i?e:new i(function(t){t(e)})).then(r,o)}window.btoa(d),l((n=n.apply(t,e||[])).next())})};t=document.getElementById("contactForm");let s=(t,e=document.body)=>{let i=[].slice.call(e.querySelectorAll(t));if(0===i.length)throw Error(`GET_ELEMENTS: ${e.id} -> ${t}`);return i},r=(t,e=document.body)=>{let i=e.querySelector(t);if(!i)throw Error(`GET_ELEMENT: ${e.id} -> ${t}`);return i};e=window.navigator.userAgent,function(t){t.required="required",t.email="email",t.length="length",t.checked="checked"}(n||(n={})),i=window.btoa(e);class o{constructor(t,e,i){this.input=t,this.validations=e,this.onChange=i,this.isPure=!0,this.inputBlurHandler=()=>this.inputBlur(),this.inputInputHandler=()=>this.inputInput(),this.inputClickHandler=()=>this.inputClick(),t.addEventListener("blur",this.inputBlurHandler),t.addEventListener("input",this.inputInputHandler),t.addEventListener("click",this.inputClickHandler)}inputBlur(){this.isPure=!1,this._handleInputAction()}inputInput(){this._handleInputAction()}inputClick(){this._handleInputAction()}initValidation(){this._handleInputAction()}_handleInputAction(){let t=!0;if(this.validations.forEach(e=>{t=t&&l(this.input,e)}),d(this.input)){let e=this.input.parentElement.parentElement,i=s("input",e);if(t){if(i.forEach(t=>t.dataset.sbCanSubmit="yes"),this.isPure)return this.onChange(),void(this.isPure=!1);e.firstElementChild.classList.remove("is-invalid")}else{if(i.forEach(t=>t.dataset.sbCanSubmit="no"),this.isPure)return this.onChange(),void(this.isPure=!1);e.firstElementChild.classList.add("is-invalid")}}else if(t){if(this.input.dataset.sbCanSubmit="yes",this.isPure)return void this.onChange();this.input.classList.remove("is-invalid")}else{if(this.input.dataset.sbCanSubmit="no",this.isPure)return void this.onChange();this.input.classList.add("is-invalid")}this.onChange()}reset(){if(this.isPure=!0,d(this.input)){let t=this.input.parentElement.parentElement,e=s("input",t);t.firstElementChild.classList.remove("is-invalid"),e.forEach(t=>{t.dataset.sbCanSubmit="no",t.checked=!1})}else this.input.value="",this.input.classList.remove("is-invalid"),this.input.dataset.sbCanSubmit="no"}tearDown(){this.reset(),this.input.removeEventListener("blur",this.inputBlurHandler),this.input.removeEventListener("input",this.inputInputHandler),this.input.removeEventListener("click",this.inputClickHandler)}}t.setAttribute("data-api-token",i);let d=t=>!!["checkbox","radio"].find(e=>e===t.type),l=(t,e)=>{let i,n,a=!0;if(d(t)&&(n=t.parentElement.parentElement),"object"==typeof e){if(a=e.validate(),!(i=r(`[data-sb-feedback="${t.id}:${e.name}"]`)))throw Error(`VALIDATION_NOT_SETUP_FOR: ${t.id}:${e.name}`)}else{switch(e){case"required":d(t)?a=s("input",n).reduce((t,e)=>t||e.checked,!1):t.value||(a=!1);break;case"email":a=u(t.value);break;case"length":a=c(t.value);break;case"checked":a=t.checked}if(d(t))try{i=r(`[data-sb-feedback="${t.name}:${e}"]`)}catch(o){throw Error(`VALIDATION_NOT_SETUP_FOR: ${t.name}:${e}`)}else try{i=r(`[data-sb-feedback="${t.id}:${e}"]`)}catch(l){throw Error(`VALIDATION_NOT_SETUP_FOR: ${t.id}:${e}`)}}return a?i.classList.add("d-none"):i.classList.remove("d-none"),a},u=t=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase()),c=t=>t.length>8;(t=>{let e=document.createElement("style");e.textContent=".d-none {\n    display: none;\n}\n.invalid-feedback {\n    display: none;\n}\n.btn.disabled {\n    pointer-events: none;\n    opacity: 0.65;\n}",document.head.append(e)})(),window.addEventListener("DOMContentLoaded",()=>{s("form[data-api-token]").forEach(t=>p(t))});let h={initializeForm:(t,e)=>p(t,e)};window.sbForms=h;let p=(e,i)=>{let l=!0,u=[],c=()=>{L()},h=r("#submitButton",e),p=r("#submitSuccessMessage",e),f=r("#submitErrorMessage",e),b=t.getAttribute("data-api-token");"API_TOKEN"===b&&(l=!1);let m=i||s("input, textarea, select",e);m.forEach(t=>{let e=t.dataset.sbValidations;e?(t.dataset.sbCanSubmit="no",u.push(new o(t,(t=>{let e=t.split(",").map(t=>t.trim());return e.forEach(t=>{if(!(t in n))throw Error(`UNRECOGNIZED_VALIDATION_KEY: ${t}`)}),e})(e),c))):t.dataset.sbCanSubmit="yes"});let E=e=>{var i,n,s,r;return i=void 0,n=void 0,r=function*(){var i;e.preventDefault(),h.classList.add("d-none");try{console.log(v(m)),l&&(yield(i={token:b,submissionObject:v(m)},a(void 0,void 0,void 0,function*(){var e,n;let s=yield(n=i,a(void 0,void 0,void 0,function*(){var e="https:"==location.protocol?"https:":"http:";let i=JSON.stringify(n),a=new Headers({"Content-Type":"application/json","X-CSRFToken":t.getAttribute("csrf-token")}),s=yield fetch(e+"//"+window.location.host+"/contact-api/",{method:"POST",headers:a,referrerPolicy:"no-referrer",body:i});if(!(s.status>=200&&s.status<300))throw Error(`FETCH_RETURNED_STATUS: ${s.status}`);return s}));return yield s.json()}))),p.classList.remove("d-none"),m.forEach(t=>{t.setAttribute("disabled","")})}catch(n){console.error(n),f.classList.remove("d-none")}},new(s=void 0,s=Promise)(function(t,e){function a(t){try{d(r.next(t))}catch(i){e(i)}}function o(t){try{d(r.throw(t))}catch(i){e(i)}}function d(e){var i;e.done?t(e.value):((i=e.value)instanceof s?i:new s(function(t){t(i)})).then(a,o)}d((r=r.apply(i,n||[])).next())})},y=t=>E(t);h.addEventListener("click",y);let L=()=>{m.reduce((t,e)=>{if(d(e)){let i=e.parentElement.parentElement,n=s("input",i);return t&&n.reduce((t,e)=>t||"yes"===e.dataset.sbCanSubmit,!1)}return"yes"===e.dataset.sbCanSubmit?t&&!0:t&&!1},!0)?h.classList.remove("disabled"):h.classList.add("disabled")};return u.forEach(t=>t.initValidation()),L(),{tearDown(){h.removeEventListener("click",y),p.classList.add("d-none"),f.classList.add("d-none"),h.classList.remove("d-none"),h.classList.add("disabled"),m.forEach(t=>{t.removeAttribute("disabled")}),u.forEach(t=>t.tearDown())}}},v=t=>{let e={};return t.forEach(t=>{if("checkbox"===t.type||"radio"===t.type)return e[t.name]||(e[t.name]={}),void(e[t.name][t.id]=t.disabled?"DISABLED":t.checked.toString());e[t.id]=t.value}),e}})();